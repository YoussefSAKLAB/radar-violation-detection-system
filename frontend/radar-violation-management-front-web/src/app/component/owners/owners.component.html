<div class="d-flex align-items-center m-2">
  <h4><b>Owners/Vehicles</b></h4>
</div>

<ng-template #errors>
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    <span class="fas fa-bullhorn me-1"></span>
    <strong>{{ errMessage }}</strong>
    <button type="button" class="btn-close btn-sm" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
</ng-template>

<div class="row"  *ngIf="owners; else errors">
  <div class="col-12 col-xl-12">
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card border-0 shadow">
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col">
                <h2 class="fs-5 fw-bold mb-0">All Owners</h2>
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
              <tr>
                <th class="border-bottom" scope="col">Name</th>
                <th class="border-bottom" scope="col">Birth Date</th>
                <th class="border-bottom" scope="col">Email</th>
                <th class="border-bottom" scope="col">Vehicles</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let o of owners">
                <th class="fw-bolder text-gray-500">{{o.name}}</th>
                <td class="fw-bolder text-gray-500">{{o.birthDate |  date: 'dd/MM/YYYY'}}</td>
                <td class="fw-bolder text-gray-500">{{o.email}}</td>
                <td class="fw-bolder text-gray-500">
                  <a (click)="showVehicles(o)" data-bs-toggle="tooltip" title="Show Owner">
                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256"
                         style="fill:#000000;">
                      <g fill="#9ca3af" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(8.53333,8.53333)"><path d="M26.206,12.559l-2.058,-5.88c-0.561,-1.602 -2.079,-2.679 -3.777,-2.679h-10.742c-1.698,0 -3.216,1.077 -3.776,2.678l-2.058,5.88c-1.099,0.723 -1.795,1.972 -1.795,3.346v7.096c0,1.105 0.895,2 2,2c1.105,0 2,-0.895 2,-2v-1.261c0,0 5.281,0.261 9,0.261c3.719,0 9,-0.261 9,-0.261v1.261c0,1.105 0.895,2 2,2c1.105,0 2,-0.895 2,-2v-7.096c0,-1.374 -0.697,-2.623 -1.794,-3.345zM6.595,10.613l1.146,-3.274c0.281,-0.802 1.038,-1.339 1.888,-1.339h10.742c0.85,0 1.607,0.537 1.888,1.339l1.146,3.274c0.18,0.515 -0.249,1.034 -0.788,0.947c-1.961,-0.317 -4.482,-0.56 -7.617,-0.56c-3.135,0 -5.656,0.243 -7.617,0.56c-0.539,0.087 -0.968,-0.432 -0.788,-0.947zM6.5,18c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.828 0.672,-1.5 1.5,-1.5c0.828,0 1.5,0.672 1.5,1.5c0,0.828 -0.672,1.5 -1.5,1.5zM18,17h-6c-0.552,0 -1,-0.448 -1,-1c0,-0.552 0.448,-1 1,-1h6c0.552,0 1,0.448 1,1c0,0.552 -0.448,1 -1,1zM23.5,18c-0.828,0 -1.5,-0.672 -1.5,-1.5c0,-0.828 0.672,-1.5 1.5,-1.5c0.828,0 1.5,0.672 1.5,1.5c0,0.828 -0.672,1.5 -1.5,1.5z"></path></g></g>
                    </svg>
                  </a>
                </td>
              </tr>

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="isVehicleInfoVisible" class="col-12 col-xl-12">
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card border-0 shadow">
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col">
                <h2 class="fs-5 fw-bold mb-0">{{ownerName}}'s Vehicles</h2>
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
              <tr>
                <th class="border-bottom" scope="col">Registration Number</th>
                <th class="border-bottom" scope="col">Brand</th>
                <th class="border-bottom" scope="col">Model</th>
                <th class="border-bottom" scope="col">Fiscal Power</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let v of ownerVehicles">
                <th class="fw-bolder text-gray-500">{{v.registrationNumber| slice:0:8 }}</th>
                <td class="fw-bolder text-gray-500">{{v.brand}}</td>
                <td class="fw-bolder text-gray-500">{{v.model}}</td>
                <td class="fw-bolder text-gray-500">{{v.fiscalPower}} </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



